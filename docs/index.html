<!DOCTYPE html><html class="default" lang="en" data-base="."><head><style>body { visibility: hidden; }</style><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="IE=edge"><title>homebridge-sharkiq</title><meta name="description" content="Documentation for homebridge-sharkiq"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="assets/style.css"><link rel="stylesheet" href="assets/highlight.css"><script defer="" src="assets/main.js"></script><script async="" src="assets/icons.js" id="tsd-icons-script"></script><link rel="stylesheet" href="assets/dmt/dmt-components.css"><link rel="stylesheet" href="assets/dmt/dmt-theme.css"><script src="assets/dmt/dmt-components.js" type="module"></script><noscript><style>body { visibility: visible; }</style></noscript></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";</script><div class="overlay"></div>
<main><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field" id="dmt-search-main"></div><div class="field" id="dmt-toolbar"><a href="index.html" class="title">homebridge-sharkiq</a></div></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main" tabindex="-1"><div class="col-content"><div class="tsd-page-title"><div class="dmt-title-header-flex"><h1>homebridge-sharkiq</h1></div></div><div class="tsd-panel tsd-typography"><span align="center">
<a id="homebridge-shark-clean-vacuum-plugin" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Homebridge Shark Clean Vacuum Plugin<a href="#homebridge-shark-clean-vacuum-plugin" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://github.com/homebridge/homebridge/wiki/Verified-Plugins"><img src="https://badgen.net/badge/homebridge/verified/purple" alt="verified-by-homebridge"></a>
<a href="https://www.npmjs.com/package/homebridge-sharkiq"><img src="https://badgen.net/npm/dt/homebridge-sharkiq?color=purple" alt="npm"></a>
<a href="https://www.npmjs.com/package/homebridge-sharkiq"><img src="https://badgen.net/npm/v/homebridge-sharkiq?color=purple" alt="npm"></a></p>
</span>
<p>A new homebridge plugin for SharkIQ Vacuums.</p>
<p>Contributions are always welcome. I used the <a href="https://github.com/JeffResc/sharkiq/">sharkiq</a> python module as a reference for creating the javascript wrapper to control SharkIQ Vacuums.</p>
<p>This plguin has only been tested on the <code>UR250BEXUS</code> model.</p>
<p>The fastest way to get community support (not for bugs) is to join the <a href="https://discord.gg/kqNCe2D">Homebridge Discord server</a> and chat in the #sharkiq channel.</p>
<a id="install-and-setup" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Install and Setup<a href="#install-and-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="step-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Step 1.<a href="#step-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Run <code>npm install -g homebridge-sharkiq</code></p>
<a id="step-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Step 2.<a href="#step-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Configure Homebridge. The config file for SharkIQ should include:</p>
<pre><code class="json"><span class="hl-0">{</span><br><span class="hl-0">    </span><span class="hl-1">"platforms"</span><span class="hl-0">: [</span><br><span class="hl-0">        {</span><br><span class="hl-0">            </span><span class="hl-1">"name"</span><span class="hl-0">: </span><span class="hl-2">"SharkIQ"</span><span class="hl-0">,</span><br><span class="hl-0">            </span><span class="hl-1">"platform"</span><span class="hl-0">: </span><span class="hl-2">"SharkIQ"</span><span class="hl-0">,</span><br><span class="hl-0">            </span><span class="hl-1">"email"</span><span class="hl-0">: </span><span class="hl-2">"[Shark Clean Account Email]"</span><span class="hl-0">,</span><br><span class="hl-0">            </span><span class="hl-1">"password"</span><span class="hl-0">: </span><span class="hl-2">"[Shark Clean Account Password]"</span><span class="hl-0">,</span><br><span class="hl-0">            </span><span class="hl-1">"oAuthCode"</span><span class="hl-0">: </span><span class="hl-2">"[Optional. Use for manually obtaining credentials]"</span><span class="hl-0">,</span><br><span class="hl-0">            </span><span class="hl-1">"vacuums"</span><span class="hl-0">: [</span><br><span class="hl-0">                </span><span class="hl-2">"[Shark Vacuum DSN]"</span><span class="hl-0">,</span><br><span class="hl-0">                </span><span class="hl-2">"..."</span><br><span class="hl-0">            ],</span><br><span class="hl-0">            </span><span class="hl-1">"europe"</span><span class="hl-0">: </span><span class="hl-3">false</span><span class="hl-0">,</span><br><span class="hl-0">            </span><span class="hl-1">"invertDockedStatus"</span><span class="hl-0">: </span><span class="hl-3">false</span><span class="hl-0">,</span><br><span class="hl-0">            </span><span class="hl-1">"dockedUpdateInterval"</span><span class="hl-0">: </span><span class="hl-4">30000</span><br><span class="hl-0">        }</span><br><span class="hl-0">    ]</span><br><span class="hl-0">}</span>
</code><button type="button">Copy</button></pre>

<a id="important" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Important<a href="#important" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>You may be prompted to use the manual OAuth login method. In order to use the manual OAuth login method, you must remove the email and password values in your configuration first.</p>
<a id="" class="tsd-anchor"></a><h1 class="tsd-anchor-link"></h1><p>The email and password is your Shark Clean account you used to setup the vacuum. The Vacuums array is a list of your vacuum's device serial numbers (DSN). If you only have one vacuum, just include the one's DSN. The DSN(s) can be found in the SharkClean mobile app.</p>
<p>If you would like to manually obtain your Shark Clean credentials without using your email and password, you can obtain a OAuth code instead. Refer to the <code>OAuth Code Login Method</code> section.</p>
<p>The Vacuums array is a list of your vacuum's device serial numbers (DSN). If you only have one vacuum, just include the one's DSN. The DSN(s) can be found in the SharkClean mobile app.</p>
<p>If you are in Europe, set the <code>europe</code> config value to <code>true</code>. SharkClean has separate servers for the U.S. and Europe. The default value is <code>false</code>, which connects to the U.S. server.</p>
<p>The default interval between updating the docked status is 30 seconds (30000 ms). To change the docked status interval, add <code>dockedUpdateInterval</code> to your config. Value is in milliseconds. If the interval is too low, you have the risk of your account being rate limited.</p>
<a id="features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Be able to turn on and off the vacuum</li>
<li>Set the power mode of the vacuum and change it while running</li>
<li>Sensor for if the vacuum is docked or not
<ul>
<li>The sensor will display as "opened" when the vacuum is docked and "closed" when the vacuum is not docked</li>
<li>Set <code>invertDockedStatus</code> to <code>true</code> to display as "closed" when the vacuum is docked and "opened" when the vacuum is not docked</li>
</ul>
</li>
<li>Pause switch for pausing the vacuum while it's running</li>
</ul>
<a id="oauth-code-login-method" class="tsd-anchor"></a><h3 class="tsd-anchor-link">OAuth Code Login Method<a href="#oauth-code-login-method" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The OAuth Code value is for creating and storing the login for the plugin. Here is how to sign in with this method.</p>
<ol>
<li>Run Homebridge with the latest plugin version.</li>
<li>Open the Homebridge logs</li>
<li>Open the URL in the console printed by homebridge-sharkiq. Safari will not work due to the way Safari handles the results of the login</li>
<li>Before you login, open up developer tools in your browser (inspect element), and navigate to the network tab</li>
<li>Enter your login info, and press continue</li>
<li>Open the request with the uri of <code>/authorize/resume</code> that shows up and view the headers</li>
<li>Search <code>com.sharkninja.shark</code> in the headers</li>
<li>Copy the code in between <code>code=</code> and <code>&amp;</code>. for example in <code>com.sharkninja.shark://login.sharkninja.com/ios/com.sharkninja.shark/callback?code=abcdefghijkl&amp;state=</code>, <code>abcdefghijkl</code> is the code that needs to be copied</li>
<li>Open your Homebridge configuration, and paste the <code>code</code> value in the OAuth Code config option</li>
<li>Restart Homebridge</li>
</ol>
<a id="notes" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Notes<a href="#notes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Contributions would be very helpful to help this Homebridge plugin stay maintained and up to date. If you have any problems, please create an issue.</p>
<a id="useful-links" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Useful Links<a href="#useful-links" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://github.com/JeffResc/sharkiq/">SharkIQ Python</a></li>
</ul>
</div></div><div class="col-sidebar" tabindex="-1"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked=""><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open="" class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details" tabindex="-1"><a href="#homebridge-shark-clean-vacuum-plugin"><span>Homebridge <wbr>Shark <wbr>Clean <wbr>Vacuum <wbr>Plugin</span></a><ul><li><a href="#install-and-setup"><span>Install and <wbr>Setup</span></a></li><li><ul><li><a href="#step-1"><span>Step 1.</span></a></li><li><a href="#step-2"><span>Step 2.</span></a></li></ul></li></ul><a href="#important"><span>Important</span></a><a href="#"><span></span></a><ul><li><a href="#features"><span>Features</span></a></li><li><ul><li><a href="#oauth-code-login-method"><span>OAuth <wbr>Code <wbr>Login <wbr>Method</span></a></li></ul></li><li><a href="#notes"><span>Notes</span></a></li><li><a href="#useful-links"><span>Useful <wbr>Links</span></a></li></ul></div></details></div><div class="site-menu" tabindex="-1"><nav class="tsd-navigation"><a href="modules.html">homebridge-sharkiq</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"></ul></nav></div></div></div></main></body></html>